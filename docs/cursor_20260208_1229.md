# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
_Exported on 2/8/2026 at 12:29:23 GMT+3 from Cursor (2.4.21)_

---

**User**

–ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞, –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ–Ω–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º, –æ–ø–∏—Å–∞–Ω–Ω—ã–º –≤ —Ñ–∞–π–ª–∞—Ö .cursor –æ–ø–∏—à–∏ –ø—Ä–æ–µ–∫—Ç, –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ .md –≤ –ø–∞–ø–∫–µ docs 
–¥–æ–±–∞–≤—å —Ñ–∞–π–ª requirements.txt —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

---

**Cursor**

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–≤ –ø—Ä–æ–µ–∫—Ç, —è –≤—ã–ø–æ–ª–Ω–∏–ª —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:

1.  **–ê–Ω–∞–ª–∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º:**
    *   –ò–∑—É—á–∏–ª —Ñ–∞–π–ª—ã `.cursor/rules/pure-architecture.mdc` –∏ `.cursor/rules/python-standards.mdc`.
    *   –ü—Ä–æ–≤–µ—Ä–∏–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∫–æ–¥ —Å–∫—Ä–∏–ø—Ç–æ–≤ (`mcp_server.py`, `mcp_sse_server.py`, `mcp_server/`, `shared/`).
    *   –í—ã—è–≤–∏–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è —Å —Ç—Ä–µ–±—É–µ–º–æ–π "–ß–∏—Å—Ç–æ–π –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π" (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–ª–æ–µ–≤ `domain`, `application`, `infrastructure`, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `sys.path.append`, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞).

2.  **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
    *   –°–æ–∑–¥–∞–ª —Ñ–∞–π–ª `docs/project_description.md` —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∞–Ω–∞–ª–∏–∑–æ–º –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º. –í —Ñ–∞–π–ª–µ —Ç–∞–∫–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É –¥–ª—è –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º.

3.  **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    *   –°–æ–∑–¥–∞–ª —Ñ–∞–π–ª `requirements.txt` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞, –≤–∫–ª—é—á–∏–≤ –≤ –Ω–µ–≥–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –≤ –∏–º–ø–æ—Ä—Ç–∞—Ö (`mcp`, `uvicorn`, `starlette`, `weaviate-client`, `requests`, `pymystem3`).

–§–∞–π–ª—ã —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã.

---

**User**

–ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç –µ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª–∞—Ö, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤ .cursor –∞ —Ç–∞–∫ –∂–µ –≤ —Ñ–∞–π–ª–µ:@project_description.md 

---

**Cursor**

Based on the analysis of the project structure and the provided documentation, here is a detailed report on compliance with Clean Architecture principles.

### 1. General Assessment
**Current Status:** The project **does not comply** with the Clean Architecture principles described in `.cursor/rules/pure-architecture.mdc`.

The current structure is a "flat" script-based architecture typical for small prototypes, whereas the rules demand a layered Enterprise-ready structure (`src/domain`, `src/application`, `src/infrastructure`).

### 2. Detailed Gap Analysis

| Requirement (from .mdc) | Current Implementation | Violation Level |
| :--- | :--- | :--- |
| **Layer Separation** | Mixed. Logic, API, and DB calls are in the same files or sibling folders (`mcp_server/`, `shared/`). | üî¥ **Critical** |
| **Dependency Rule** | Violated. High-level logic (`KnowledgeBaseSearch`) directly imports low-level drivers (`weaviate`, `requests`). | üî¥ **Critical** |
| **Dependency Injection** | None. Classes instantiate their dependencies directly (`self.client = get_weaviate_client()`). | üî¥ **Critical** |
| **Domain Entities** | Missing. Data is passed as raw dictionaries or strings. No Pydantic models for business entities. | üü† High |
| **Interface Segregation** | Missing. No `Protocols` or abstract base classes defining the expected behavior. | üü† High |
| **Configuration** | Environment variables are read directly in helper functions (`os.getenv` in `client.py`), not via a central Config object. | üü° Medium |

### 3. Specific Violations in Code

#### A. Direct Dependency on Infrastructure
**File:** `mcp_server/tools.py` (inferred from usage in `main.py`) & `shared/client.py`
The business logic (`KnowledgeBaseSearch`) is tightly coupled to Weaviate.
*   **Violation:** `from shared.client import get_weaviate_client`
*   **Why it's bad:** You cannot easily swap Weaviate for Qdrant or mock it for testing without patching imports.
*   **Correct Approach:** Define `IVectorStore` in `domain` and inject `WeaviateAdapter` via constructor.

#### B. "God Object" / Mixed Responsibilities
**File:** `mcp_server/main.py`
This file initializes the DB connection, defines the API (MCP tools), and runs the server.
*   **Violation:** `kb = KnowledgeBaseSearch()` (Global state initialization at module level).
*   **Why it's bad:** Hard to test, hard to manage lifecycle.
*   **Correct Approach:** Use a DI container (`dishka` or `punq`) to assemble the application in `main.py`, keeping the tool definitions pure.

#### C. Missing Domain Layer
There is no representation of what a "Project" or "Price" is in the system, other than raw JSON/Dicts returned from Weaviate.
*   **Violation:** `return kb.search_projects(query)` returns a string directly constructed from DB results.
*   **Correct Approach:** `search_projects` should return `List[ProjectEntity]`, which the Presentation layer (MCP) then formats into text.

### 4. Refactoring Plan (Roadmap)

To bring the project into compliance, I recommend the following steps:

1.  **Scaffold Directory Structure:**
    Create `src/` with `domain/`, `application/`, `infrastructure/`, `presentation/`, `config/`.

2.  **Define Domain Layer:**
    *   Create `src/domain/entities.py`: `Project`, `Service`, `Price`.
    *   Create `src/domain/interfaces.py`: `IKnowledgeBase` (Protocol).

3.  **Implement Infrastructure Layer:**
    *   Move `shared/client.py` logic to `src/infrastructure/db/weaviate_adapter.py`.
    *   Implement `IKnowledgeBase` using the Weaviate client.

4.  **Implement Application Layer:**
    *   Create `src/application/use_cases.py` (e.g., `SearchProjectsUseCase`).

5.  **Setup Dependency Injection:**
    *   Create `src/config/container.py` to wire `IKnowledgeBase` -> `WeaviateAdapter`.

6.  **Update Presentation Layer:**
    *   Rewrite `mcp_server.py` to use the Container and Use Cases instead of direct tool calls.

This refactoring will make the system testable, scalable, and compliant with your architecture rules.

---

**User**

–ø–µ—Ä–µ–≤–µ–¥–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫

---

**Cursor**

–û—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –≤–æ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –ß–∏—Å—Ç–æ–π –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

### 1. –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞
**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** –ü—Ä–æ–µ–∫—Ç **–Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç** –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –ß–∏—Å—Ç–æ–π –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –æ–ø–∏—Å–∞–Ω–Ω—ã–º –≤ `.cursor/rules/pure-architecture.mdc`.

–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π "–ø–ª–æ—Å–∫—É—é" —Å–∫—Ä–∏–ø—Ç–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, —Ç–∏–ø–∏—á–Ω—É—é –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤, —Ç–æ–≥–¥–∞ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–∞ —Ç—Ä–µ–±—É—é—Ç –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —É—Ä–æ–≤–Ω—è Enterprise (`src/domain`, `src/application`, `src/infrastructure`).

### 2. –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ (–∏–∑ .mdc) | –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è | –£—Ä–æ–≤–µ–Ω—å –Ω–∞—Ä—É—à–µ–Ω–∏—è |
| :--- | :--- | :--- |
| **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤** | –°–º–µ—à–∞–Ω–Ω–æ–µ. –õ–æ–≥–∏–∫–∞, API –∏ –≤—ã–∑–æ–≤—ã –ë–î –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ —Ñ–∞–π–ª–∞—Ö –∏–ª–∏ —Å–æ—Å–µ–¥–Ω–∏—Ö –ø–∞–ø–∫–∞—Ö (`mcp_server/`, `shared/`). | üî¥ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π** |
| **–ü—Ä–∞–≤–∏–ª–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** | –ù–∞—Ä—É—à–µ–Ω–æ. –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –ª–æ–≥–∏–∫–∞ (`KnowledgeBaseSearch`) –Ω–∞–ø—Ä—è–º—É—é –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –¥—Ä–∞–π–≤–µ—Ä—ã (`weaviate`, `requests`). | üî¥ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π** |
| **–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (DI)** | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç. –ö–ª–∞—Å—Å—ã —Å–æ–∑–¥–∞—é—Ç —Å–≤–æ–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞–ø—Ä—è–º—É—é (`self.client = get_weaviate_client()`). | üî¥ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π** |
| **–°—É—â–Ω–æ—Å—Ç–∏ –¥–æ–º–µ–Ω–∞** | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ "—Å—ã—Ä—ã–µ" —Å–ª–æ–≤–∞—Ä–∏ –∏–ª–∏ —Å—Ç—Ä–æ–∫–∏. –ù–µ—Ç Pydantic –º–æ–¥–µ–ª–µ–π –¥–ª—è –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–µ–π. | üü† –í—ã—Å–æ–∫–∏–π |
| **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤** | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç. –ù–µ—Ç `Protocols` –∏–ª–∏ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –±–∞–∑–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏—Ö –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. | üü† –í—ã—Å–æ–∫–∏–π |
| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** | –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–∏—Ç–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö (`os.getenv` –≤ `client.py`), –∞ –Ω–µ —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç Config. | üü° –°—Ä–µ–¥–Ω–∏–π |

### 3. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –≤ –∫–æ–¥–µ

#### A. –ü—Ä—è–º–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
**–§–∞–π–ª:** `mcp_server/tools.py` (–∏—Å—Ö–æ–¥—è –∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ `main.py`) –∏ `shared/client.py`
–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (`KnowledgeBaseSearch`) –∂–µ—Å—Ç–∫–æ —Å–≤—è–∑–∞–Ω–∞ —Å Weaviate.
*   **–ù–∞—Ä—É—à–µ–Ω–∏–µ:** `from shared.client import get_weaviate_client`
*   **–ü–æ—á–µ–º—É —ç—Ç–æ –ø–ª–æ—Ö–æ:** –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –∑–∞–º–µ–Ω–∏—Ç—å Weaviate –Ω–∞ Qdrant –∏–ª–∏ –∑–∞–º–æ–∫–∞—Ç—å –µ–≥–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –±–µ–∑ –ø–∞—Ç—á–∏–Ω–≥–∞ –∏–º–ø–æ—Ä—Ç–æ–≤.
*   **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:** –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å `IVectorStore` –≤ `domain` –∏ –≤–Ω–µ–¥—Ä–∏—Ç—å `WeaviateAdapter` —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä.

#### B. "–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç" / –°–º–µ—à–∞–Ω–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
**–§–∞–π–ª:** `mcp_server/main.py`
–≠—Ç–æ—Ç —Ñ–∞–π–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –ë–î, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç API (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã MCP) –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä.
*   **–ù–∞—Ä—É—à–µ–Ω–∏–µ:** `kb = KnowledgeBaseSearch()` (–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è).
*   **–ü–æ—á–µ–º—É —ç—Ç–æ –ø–ª–æ—Ö–æ:** –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, —Å–ª–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º.
*   **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (`dishka` –∏–ª–∏ `punq`) –¥–ª—è —Å–±–æ—Ä–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ `main.py`, –æ—Å—Ç–∞–≤–ª—è—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —á–∏—Å—Ç—ã–º–∏.

#### C. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π —Å–ª–æ–π –¥–æ–º–µ–Ω–∞
–í —Å–∏—Å—Ç–µ–º–µ –Ω–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ —Ç–∞–∫–æ–µ "–ü—Ä–æ–µ–∫—Ç" –∏–ª–∏ "–¶–µ–Ω–∞", –∫—Ä–æ–º–µ —Å—ã—Ä—ã—Ö JSON/Dict, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∏–∑ Weaviate.
*   **–ù–∞—Ä—É—à–µ–Ω–∏–µ:** `return kb.search_projects(query)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, –Ω–∞–ø—Ä—è–º—É—é —Å–æ–±—Ä–∞–Ω–Ω—É—é –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ë–î.
*   **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:** `search_projects` –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `List[ProjectEntity]`, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º —Å–ª–æ–π Presentation (MCP) —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –≤ —Ç–µ–∫—Å—Ç.

### 4. –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (Roadmap)

–î–ª—è –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ —è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1.  **–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫:**
    –°–æ–∑–¥–∞—Ç—å `src/` —Å –ø–æ–¥–ø–∞–ø–∫–∞–º–∏ `domain/`, `application/`, `infrastructure/`, `presentation/`, `config/`.

2.  **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–ª–æ–π –¥–æ–º–µ–Ω–∞:**
    *   –°–æ–∑–¥–∞—Ç—å `src/domain/entities.py`: `Project`, `Service`, `Price`.
    *   –°–æ–∑–¥–∞—Ç—å `src/domain/interfaces.py`: `IKnowledgeBase` (Protocol).

3.  **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–ª–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
    *   –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É `shared/client.py` –≤ `src/infrastructure/db/weaviate_adapter.py`.
    *   –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `IKnowledgeBase`, –∏—Å–ø–æ–ª—å–∑—É—è –∫–ª–∏–µ–Ω—Ç Weaviate.

4.  **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
    *   –°–æ–∑–¥–∞—Ç—å `src/application/use_cases.py` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `SearchProjectsUseCase`).

5.  **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
    *   –°–æ–∑–¥–∞—Ç—å `src/config/container.py` –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è `IKnowledgeBase` -> `WeaviateAdapter`.

6.  **–û–±–Ω–æ–≤–∏—Ç—å —Å–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è:**
    *   –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å `mcp_server.py`, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ Use Cases –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.

–≠—Ç–æ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–π, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –≤–∞—à–∏–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º.

---

**User**

—Ä–µ–∞–ª–∏–∑—É–π –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

---

**Cursor**

–Ø —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ø—Ä–∏–≤–µ–ª –ø—Ä–æ–µ–∫—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏ –ß–∏—Å—Ç–æ–π –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1.  **–°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤ (`src/`)**:
    *   `src/domain`: –°–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.
    *   `src/application`: –°–æ–¥–µ—Ä–∂–∏—Ç Use Cases (—Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è).
    *   `src/infrastructure`: –°–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ (Weaviate, Tokenizer).
    *   `src/presentation`: –°–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ (MCP —Å–µ—Ä–≤–µ—Ä—ã).
    *   `src/config`: –°–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

2.  **–°–ª–æ–π –î–æ–º–µ–Ω–∞ (`src/domain`)**:
    *   `entities.py`: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã Pydantic –º–æ–¥–µ–ª–∏ `ProjectEntity` –∏ `ServiceEntity`.
    *   `interfaces.py`: –û–ø—Ä–µ–¥–µ–ª–µ–Ω –ø—Ä–æ—Ç–æ–∫–æ–ª `IKnowledgeBase`, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π.

3.  **–°–ª–æ–π –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (`src/infrastructure`)**:
    *   `db/weaviate_adapter.py`: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–ª–∞—Å—Å `WeaviateAdapter`, –∫–æ—Ç–æ—Ä—ã–π –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç `IKnowledgeBase`. –í—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å Weaviate –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–∞–º–∏ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–∞ –∑–¥–µ—Å—å.
    *   `nlp/tokenizer.py`: –í—ã–Ω–µ—Å–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞.

4.  **–°–ª–æ–π –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`src/application`)**:
    *   `use_cases.py`: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `SearchUseCase`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–∏—Å–∫, –∏—Å–ø–æ–ª—å–∑—É—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é `IKnowledgeBase`.

5.  **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`src/config`)**:
    *   `settings.py`: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ Pydantic Settings.
    *   `container.py`: –ü—Ä–æ—Å—Ç–æ–π DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`WeaviateAdapter` -> `SearchUseCase`).

6.  **–°–ª–æ–π –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (`src/presentation`)**:
    *   `mcp_server.py`: –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π MCP —Å–µ—Ä–≤–µ—Ä (stdio), –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.
    *   `mcp_sse_server.py`: –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π SSE —Å–µ—Ä–≤–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏, —Ç–µ—Å—Ç–∏—Ä—É–µ–º—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º Enterprise-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –≤ –∫–æ—Ä–Ω–µ (`mcp_server.py`, `shared/` –∏ —Ç.–¥.) –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏.

---

**User**

—Å–æ–±–µ—Ä–∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–µ arxive (—Å–æ–∑–¥–∞–π)

---

**Cursor**

–Ø —Å–æ–∑–¥–∞–ª –ø–∞–ø–∫—É `arxive` –∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª —Ç—É–¥–∞ —Å—Ç–∞—Ä—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –≤ `src/`.

**–ü–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ `arxive/`:**
*   `agent_tools.py`
*   `texts_processing.py`
*   `mcp_server.py` (—Å—Ç–∞—Ä—ã–π –∫–æ—Ä–µ–Ω—å)
*   `mcp_sse_server.py` (—Å—Ç–∞—Ä—ã–π –∫–æ—Ä–µ–Ω—å)
*   `mcp_server/` (—Å—Ç–∞—Ä–∞—è –ø–∞–ø–∫–∞ —Å –ª–æ–≥–∏–∫–æ–π)
*   `shared/` (—Å—Ç–∞—Ä–∞—è –ø–∞–ø–∫–∞ —Å —É—Ç–∏–ª–∏—Ç–∞–º–∏)

–¢–µ–ø–µ—Ä—å –∫–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–≥–ª—è–¥–∏—Ç —á–∏—Å—Ç–æ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –ø–∞–ø–∫—É `src` —Å –Ω–æ–≤—ã–º –∫–æ–¥–æ–º.

